<style>
  button {
    padding: 10px;
    border-radius: 4px;
    cursor: pointer;
  }

  button[aria-disabled="true"] {
    opacity: 0.6;
    background: #e0e0e0;
    color: #666;
    cursor: not-allowed;
  }

  button:focus-visible {
    outline: 3px solid #2196f3;
    outline-offset: 3px;
  }

  button[aria-disabled="true"]:focus-visible {
    outline-color: #9e9e9e;
    outline-style: dashed;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    button:focus-visible {
      outline-width: 4px;
    }
  }

  [role="alert"] {
    margin-top: 1em;
    padding: 0.75em;
    background: var(--background, yellow);
    color: var(--color, black);
    border-left: 4px solid var(--color, black);
  }

  #form-error {
    --color: #c62828;
    --background: #ffebee;
  }

  #form-success {
    --color: #227a1a;
    --background: #ebfff1;
  }

  label:has(+ input[required])::after {
    content: "*";
  }

  .input-container {
    display: flex;
    flex-direction: column;
  }

  body {
    padding: 20px;
    margin: 0 auto;
    max-width: 350px;
  }

  #contact-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
</style>

<body>
  <form id="contact-form">
    <div class="input-container">
      <label for="name">Name</label>
      <input type="text" id="name" required" />
    </div>

    <div class="input-container">
      <label for="email">Email</label>
      <input type="email" id="email" required" />
    </div>

    <div class="input-container">
      <label for="message">Message</label>
      <textarea id="message" required"></textarea>
    </div>

    <button type="submit" id="submit-contact" aria-disabled="true">
      Send Message
    </button>

    <div id="form-error" role="alert" aria-live="polite" hidden></div>
    <div id="form-success" role="alert" aria-live="polite" hidden></div>
  </form>
</body>

<script>
  function validateContactForm() {
    const name = document.getElementById("name");
    const email = document.getElementById("email");
    const message = document.getElementById("message");
    const button = document.getElementById("submit-contact");

    const isValid = name.value && email.value && message.value;
    button.setAttribute("aria-disabled", !isValid);
  }

  document.getElementById("contact-form").addEventListener("submit", (e) => {
    e.preventDefault();

    const inputs = document.querySelectorAll('input, textarea');
    for (const input of inputs) input.addEventListener('click', validateContactForm);

    const button = document.getElementById("submit-contact");
    const error = document.getElementById("form-error");
    const success = document.getElementById("form-success");

    if (button.getAttribute("aria-disabled") === "true") {
      success.hidden = true;
      const emptyFields = [];
      if (!name.value) emptyFields.push("Name");
      if (!email.value) emptyFields.push("Email");
      if (!message.value) emptyFields.push("Message");

      error.textContent = `Please fill in: ${emptyFields.join(", ")}`;
      error.hidden = false;

      if (!name.value) name.focus();
      else if (!email.value) email.focus();
      else if (!message.value) message.focus();

      return;
    }

    error.hidden = true;
    success.hidden = false;
    success.textContent = "Form submitted successfully";

    // submit
  });
</script>
